@model IEnumerable<Forum.ViewModel.HomeVM>
@{
    ViewData["Title"] = "Index";
}




<div class="top-container">
    <h2>Forums</h2>
</div>
<div style="border-top: 2px groove #ffffff"></div>
@if (Model.Count() > 0)
{
    <table class="table table-dark">
        <thead>
            <tr>
                <th colspan="2">Dostępne fora</th>
                <th style="text-align:center">Wątki</th>
                <th style="text-align:center">Posty</th>
                <th>Ostatni wpis</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td><img src="@item.Category.Image" style="width:5vw; display:block; border-radius:15px;" /></td>
                    <td>
                        <a asp-action="Index" asp-controller="Topic" asp-area="CustomUser" asp-route-id="@item.Category.Id" style="font-size:22px; color:#B9F98A">@Html.DisplayFor(m => item.Category.Name)</a><br />
                        @Html.DisplayFor(m => item.Category.Description)
                    </td>
                    <td style="text-align:center">
                       @Html.DisplayFor(m => item.Category.CountTopics)
                    </td>
                    <td style="text-align:center">
                        @Html.DisplayFor(m => item.Category.CountPosts)
                    </td>
                    <td style="width:20%">
                        @if (item.LastPost != null)
                        {
                            <a asp-action="TopicDetails" asp-controller="Topic" asp-area="CustomUser" asp-route-id="@item.LastPost.Topic.Id" style="color:#B9F98A">@Html.DisplayFor(m => item.LastPost.Topic.TopicTittle)</a><br />
                            <partial name="_DateFormatPartial" model="@item.LastPost.PostDate" />
                            <br />
                            <img src="@item.LastPost.User.Image" style="width:2vw; display:inline-block; border-radius:15px; margin:auto" />
                            @Html.DisplayFor(m => item.LastPost.User.UserName)
                        }
                        else
                        {
                            <p>Brak wpisów</p>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

else
{
    <div class="my-container">
        Brak forum :/
    </div>
}